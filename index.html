<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LLM Cost Dashboard â€” Inference & Training (Feb 2026)</title>
<meta name="description" content="Interactive LLM cost dashboard: inference cost decline with microwave-oven equivalents, and training cost escalation with Boeing 777 metal smelting equivalents. Updated Feb 2026.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#08080f;color:#ccc;font-family:'JetBrains Mono','SF Mono',monospace;-webkit-font-smoothing:antialiased}
#root{min-height:100vh}
::selection{background:#ff446644;color:#fff}
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:#111}
::-webkit-scrollbar-thumb{background:#333;border-radius:3px}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.7.3/Recharts.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const{useState}=React;
const{ComposedChart,Line,Area,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer,ReferenceLine}=Recharts;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHARED CONSTANTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const font="'JetBrains Mono','SF Mono',monospace";
const hf="'DM Sans',sans-serif";
const P={
  bg:"#08080f",panel:"#0e0e1a",card:"#111122",grid:"#161630",
  dim:"#889",text:"#bbc",bright:"#eee",
  red:"#ff4466",green:"#22dd88",gold:"#ffaa22",cyan:"#44ccff",
  blue:"#4488ff",purple:"#aa66ff",steel:"#8899aa",
  xai:"#ff8844",meta:"#0088ff",rose:"#e94560",amber:"#ffd700",
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 1 â€” INFERENCE DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const MW_WATTS=1000, ELEC_R=0.15;
const MW_CPS=(MW_WATTS/1000)*(ELEC_R/3600); // $/sec microwave
const QI=1000, QO=500; // query tokens

const infRaw=[
  {d:"2022-11",l:"Nov 2022",m:"text-davinci-003",i:20,o:20,n:"GPT-3.5 era (davinci)",p:false},
  {d:"2023-03",l:"Mar 2023",m:"GPT-4 (8K)",i:30,o:60,n:"GPT-4 launch",p:false},
  {d:"2023-06",l:"Jun 2023",m:"GPT-3.5 Turbo",i:1.5,o:2,n:"Price cut",p:false},
  {d:"2023-11",l:"Nov 2023",m:"GPT-4 Turbo",i:10,o:30,n:"GPT-4 Turbo launch",p:false},
  {d:"2024-05",l:"May 2024",m:"GPT-4o",i:5,o:15,n:"GPT-4o launch",p:false},
  {d:"2024-07",l:"Jul 2024",m:"GPT-4o mini",i:0.15,o:0.6,n:"GPT-4o mini â€” frontier-lite",p:false},
  {d:"2024-08",l:"Aug 2024",m:"GPT-4o (updated)",i:2.5,o:10,n:"GPT-4o price drop",p:false},
  {d:"2025-01",l:"Jan 2025",m:"DeepSeek R1",i:0.55,o:2.19,n:"DeepSeek disruption â€” ~90% below incumbents",p:false},
  {d:"2025-06",l:"Jun 2025",m:"Frontier equiv.",i:0.3,o:0.8,n:"GPT-4 equiv. ~$0.40/M blended",p:false},
  {d:"2025-12",l:"Dec 2025",m:"Blackwell-era",i:0.15,o:0.4,n:"Blackwell HW, continued competition",p:false},
  {d:"2026-06",l:"Jun 2026",m:"Blackwell opt.",i:0.08,o:0.2,n:"Blackwell + TensorRT-LLM 2.8Ã— gains",p:true},
  {d:"2027-01",l:"Jan 2027",m:"Vera Rubin era",i:0.015,o:0.04,n:"Rubin: 10Ã— token cost vs Blackwell",p:true},
  {d:"2027-06",l:"Jun 2027",m:"Rubin Ultra",i:0.008,o:0.02,n:"Rubin Ultra: doubled density",p:true},
];

const infData=infRaw.map((d,i,a)=>{
  const qc=(d.i*QI)/1e6+(d.o*QO)/1e6;
  const mws=qc/MW_CPS;
  const cl=Math.log10(qc), ml=Math.log10(mws);
  const la=!d.p&&a[i+1]?.p;
  return{...d,qc,mws,cl,ml,
    aCL:!d.p?cl:null, pCL:d.p||la?cl:null,
    aML:!d.p?ml:null, pML:d.p||la?ml:null,
    label:d.l,model:d.m,note:d.n,proj:d.p};
});

const fCost=(v)=>{if(v>=0.01)return`$${v.toFixed(3)}`;if(v>=0.001)return`$${v.toFixed(4)}`;if(v>=1e-4)return`$${v.toFixed(5)}`;return`$${v.toExponential(1)}`;};
const fMW=(s)=>{if(s>=60)return`${(s/60).toFixed(1)} min`;if(s>=1)return`${s.toFixed(1)}s`;if(s>=0.001)return`${(s*1000).toFixed(1)}ms`;return`${(s*1e6).toFixed(0)}Âµs`;};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 2 â€” TRAINING DATA (777 equiv)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const B7M=3100.4, B7C=B7M*1000*ELEC_R;
const to7=u=>u/B7C, toMW2=u=>u/ELEC_R/1000;
// Energy-based 777 conversion: GWh â†’ number of 777 metal smelting equivalents
const to7g=gwh=>(gwh*1000)/B7M;
const fGWh=v=>{if(v>=1000)return`${(v/1000).toFixed(1)} TWh`;if(v>=1)return`${v.toFixed(0)} GWh`;if(v>=0.001)return`${(v*1000).toFixed(0)} MWh`;return`${(v*1e6).toFixed(0)} kWh`;};
const fC=v=>{if(v>=1e9)return`$${(v/1e9).toFixed(1)}B`;if(v>=1e6)return`$${(v/1e6).toFixed(0)}M`;if(v>=1e3)return`$${(v/1e3).toFixed(0)}K`;return`$${v.toFixed(0)}`;};
const f7=v=>{if(v>=1000)return`${(v/1000).toFixed(1)}K`;if(v>=1)return v.toFixed(1);if(v>=0.001)return v.toFixed(3);return v.toExponential(1);};
const fMh=v=>{if(v>=1e6)return`${(v/1e6).toFixed(1)}M MWh`;if(v>=1e3)return`${(v/1e3).toFixed(0)}K MWh`;return`${v.toFixed(0)} MWh`;};

// gwh = actual training energy in GWh. Sources:
// pub = published/widely cited, epoch = Epoch AI direct, calc = from GPU-hours,
// est = estimated from cost fraction or similar models, proj = projected ~2.5Ã—/yr
const FR=[
  {l:"2017",m:"Transformer",c:900,gwh:0.000001,p:false,t:null},
  {l:"2018",m:"BERT",c:7000,gwh:0.001,p:false,t:null},
  {l:"2019",m:"GPT-2",c:50000,gwh:0.003,p:false,t:null},
  {l:"2020",m:"GPT-3",c:4600000,gwh:1.3,p:false,t:null},         // pub: widely cited
  {l:"2022 Q1",m:"PaLM",c:12000000,gwh:24,p:false,t:null},       // est: 6K TPUv4 Ã— 90d
  {l:"2022 Q3",m:"Chinchilla",c:3000000,gwh:3,p:false,t:null},
  {l:"2023 Q1",m:"GPT-4",c:78000000,gwh:50,p:false,t:null},      // pub: 25K A100 Ã— 100d
  {l:"2023 Q4",m:"Gemini Ultra",c:191000000,gwh:34,p:false,t:null}, // est: TPUv5p efficient
  {l:"2024 Q2",m:"Llama 3.1 405B",c:60000000,gwh:27,p:false,t:"meta"}, // calc: 16K H100 Ã— 54d
  {l:"2024 Q2Â·",m:"GPT-4o",c:30000000,gwh:12,p:false,t:"eff"},
  {l:"2024 Q4",m:"DeepSeek V3",c:5576000,gwh:3.6,p:false,t:"eff"}, // calc: 2.8M H800-hrs
  {l:"2025 Q1",m:"Grok 3",c:300000000,gwh:60,p:false,t:"xai"},    // est: 100K H100 Ã— 122d
  {l:"2025 Q1Â·",m:"GPT-4.5",c:400000000,gwh:100,p:false,t:null},
  {l:"2025 Q1Â·Â·",m:"DeepSeek R1",c:10000000,gwh:5,p:false,t:"eff"},
  {l:"2025 Q3",m:"Grok 4",c:490000000,gwh:310,p:false,t:"xai"},   // epoch: 246M H100-hrs
  {l:"2025 Q3Â·",m:"GPT-5",c:500000000,gwh:200,p:false,t:null},
  {l:"2026",m:"Frontier (est.)",c:800000000,gwh:600,p:true,t:null},  // proj
  {l:"2027",m:"Frontier (est.)",c:2000000000,gwh:1500,p:true,t:null}, // proj
];
const RG3=[{l:"2020",c:4600000,gwh:1.3,p:false},{l:"2022",c:450000,gwh:0.09,p:false},{l:"2023",c:200000,gwh:0.04,p:false},{l:"2024 Q1",c:100000,gwh:0.02,p:false},{l:"2024 Q4",c:50000,gwh:0.01,p:false},{l:"2025",c:25000,gwh:0.005,p:false},{l:"2026",c:10000,gwh:0.002,p:true},{l:"2027",c:3000,gwh:0.0006,p:true}];
const RG4=[{l:"2023 Q1",c:78000000,gwh:50,p:false},{l:"2023 Q4",c:20000000,gwh:4,p:false},{l:"2024 Q4",c:5576000,gwh:3.6,p:false},{l:"2025 Q1",c:3000000,gwh:0.6,p:false},{l:"2026",c:1000000,gwh:0.2,p:true},{l:"2027",c:300000,gwh:0.06,p:true}];

const frontier=FR.map((d,i,a)=>{const lc=Math.log10(d.c);const lg=d.gwh>0?Math.log10(d.gwh):null;const la=!d.p&&a[i+1]?.p;return{...d,n777:to7g(d.gwh),logCost:lc,logGWh:lg,label:d.l,model:d.m,cost:d.c,gwh:d.gwh,proj:d.p,tag:d.t,actualLog:!d.p?lc:null,projLog:d.p||la?lc:null,actualGWh:!d.p&&lg!=null?lg:null,projGWh:(d.p||la)&&lg!=null?lg:null};});

const allRL=[...new Set([...RG3.map(d=>d.l),...RG4.map(d=>d.l)])].sort();
const repData=allRL.map(label=>{const g3=RG3.find(d=>d.l===label);const g4=RG4.find(d=>d.l===label);const g3i=RG3.findIndex(d=>d.l===label);const g4i=RG4.findIndex(d=>d.l===label);const la3=g3&&!g3.p&&RG3[g3i+1]?.p;const la4=g4&&!g4.p&&RG4[g4i+1]?.p;const g3lg=g3&&g3.gwh>0?Math.log10(g3.gwh):null;const g4lg=g4&&g4.gwh>0?Math.log10(g4.gwh):null;return{label,aG3:g3&&!g3.p?Math.log10(g3.c):null,pG3:g3&&(g3.p||la3)?Math.log10(g3.c):null,aG4:g4&&!g4.p?Math.log10(g4.c):null,pG4:g4&&(g4.p||la4)?Math.log10(g4.c):null,aG3e:g3&&!g3.p?g3lg:null,pG3e:g3&&(g3.p||la3)?g3lg:null,aG4e:g4&&!g4.p?g4lg:null,pG4e:g4&&(g4.p||la4)?g4lg:null,g3c:g3?.c,g4c:g4?.c,g3g:g3?.gwh,g4g:g4?.gwh,g3p:g3?.p,g4p:g4?.p};});

const logT=[2,3,4,5,6,7,8,9,10];
const fLCT=v=>({2:"$100",3:"$1K",4:"$10K",5:"$100K",6:"$1M",7:"$10M",8:"$100M",9:"$1B",10:"$10B"}[v]||"");
const fL7T=v=>{const c=Math.pow(10,v);const n=to7(c);if(n<0.01)return`${(n*1000).toFixed(1)}e-3`;if(n<1)return n.toFixed(2);if(n<10)return n.toFixed(1);if(n<1000)return Math.round(n).toLocaleString();return`${(n/1000).toFixed(1)}K`;};
const ref7=[1,10,100,1000].map(n=>({n,lc:Math.log10(n*B7C)}));
const dCol=d=>{if(d.tag==="eff"||d.t==="eff")return P.green;if(d.tag==="xai"||d.t==="xai")return P.xai;if(d.tag==="meta"||d.t==="meta")return P.meta;return P.red;};
// Energy axis (log10 of GWh)
const eLogT=[-3,-2,-1,0,1,2,3];
const fELT=v=>({"-3":"1 MWh","-2":"10 MWh","-1":"100 MWh","0":"1 GWh","1":"10 GWh","2":"100 GWh","3":"1 TWh"}[String(v)]||"");
const eLogTR=[-3,-2,-1,0,1,2]; // narrower range for replication chart

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SECTION 3 â€” FINE-TUNING DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const FT_TOKENS=3e6; // 1M training tokens Ã— 3 epochs

const ftApiRaw=[
  {l:"Mar 2023",m:"GPT-3.5 Turbo FT",ppm:8.00,pr:false,n:"First OpenAI FT offering"},
  {l:"Oct 2023",m:"GPT-3.5 Turbo FT v2",ppm:8.00,pr:false,n:"OpenAI stabilized pricing"},
  {l:"Mar 2024",m:"Mistral Small FT",ppm:4.00,pr:false,n:"Mistral La Plateforme launch"},
  {l:"Aug 2024",m:"GPT-4o mini FT",ppm:3.00,pr:false,n:"OpenAI launched GPT-4o mini FT"},
  {l:"Jan 2025",m:"DeepSeek V3 (self-host)",ppm:0.50,pr:false,n:"Open-weight, H800 self-hosted est."},
  {l:"Jun 2025",m:"GPT-4.1 mini FT",ppm:1.50,pr:false,n:"Continued API price compression"},
  {l:"Oct 2025",m:"Llama 4 LoRA (Unsloth)",ppm:0.10,pr:false,n:"Open-weight + LoRA + Unsloth on H100"},
  {l:"2026",m:"Next-gen API FT",ppm:0.80,pr:true,n:"Projected: continued halving"},
  {l:"2027",m:"Rubin-era FT",ppm:0.20,pr:true,n:"Projected: Vera Rubin HW + competition"},
];

const ftLoraRaw=[
  {l:"Jun 2023",m:"Llama 2 7B LoRA (A100)",gpu:"A100",gph:3.50,hrs:2,pr:false,n:"Early LoRA on A100 cloud"},
  {l:"Dec 2023",m:"Mistral 7B QLoRA (A100)",gpu:"A100",gph:3.50,hrs:1,pr:false,n:"QLoRA quantized, faster"},
  {l:"Jun 2024",m:"Llama 3 8B LoRA (H100)",gpu:"H100",gph:3.00,hrs:0.5,pr:false,n:"H100 availability + better tooling"},
  {l:"Dec 2024",m:"Llama 3.1 8B (Unsloth)",gpu:"H100",gph:2.50,hrs:0.3,pr:false,n:"Unsloth 2\u00D7 speedup"},
  {l:"Jun 2025",m:"Llama 4 8B (Unsloth)",gpu:"H100",gph:2.00,hrs:0.15,pr:false,n:"MoE + Unsloth + H100 price drops"},
  {l:"Dec 2025",m:"8B LoRA (B200)",gpu:"B200",gph:1.50,hrs:0.08,pr:false,n:"Blackwell B200 + optimized kernels"},
  {l:"2026",m:"Next-gen 8B (Blackwell)",gpu:"B200",gph:1.00,hrs:0.05,pr:true,n:"Projected"},
  {l:"2027",m:"Next-gen 8B (Rubin)",gpu:"Rubin",gph:0.50,hrs:0.02,pr:true,n:"Projected"},
];

const ftApiData=ftApiRaw.map(function(d,i,a){
  var cost=d.ppm*(FT_TOKENS/1e6);
  var lc=Math.log10(cost);
  var la=!d.pr&&a[i+1]&&a[i+1].pr;
  return Object.assign({},d,{cost:cost,lc:lc,label:d.l,model:d.m,note:d.n,proj:d.pr,
    aLog:!d.pr?lc:null,pLog:d.pr||la?lc:null,series:"api"});
});

const ftLoraData=ftLoraRaw.map(function(d,i,a){
  var cost=d.gph*d.hrs;
  var lc=Math.log10(cost);
  var la=!d.pr&&a[i+1]&&a[i+1].pr;
  return Object.assign({},d,{cost:cost,lc:lc,label:d.l,model:d.m,note:d.n,proj:d.pr,
    aLog:!d.pr?lc:null,pLog:d.pr||la?lc:null,series:"lora"});
});

// Merge both series into a single chart dataset by unifying labels
var ftAllLabels=[];
ftApiData.forEach(function(d){if(ftAllLabels.indexOf(d.label)===-1)ftAllLabels.push(d.label);});
ftLoraData.forEach(function(d){if(ftAllLabels.indexOf(d.label)===-1)ftAllLabels.push(d.label);});
// Sort chronologically by extracting a rough date
function ftSortKey(lb){
  var m={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"};
  var p=lb.match(/^([A-Z][a-z]+)\s+(\d{4})$/);
  if(p)return p[2]+"-"+m[p[1]];
  var y=lb.match(/^(\d{4})/);
  if(y)return y[1]+"-13";
  return lb;
}
ftAllLabels.sort(function(a,b){return ftSortKey(a)<ftSortKey(b)?-1:1;});

const ftChartData=ftAllLabels.map(function(label){
  var api=ftApiData.find(function(d){return d.label===label;});
  var lora=ftLoraData.find(function(d){return d.label===label;});
  var apiI=ftApiData.findIndex(function(d){return d.label===label;});
  var loraI=ftLoraData.findIndex(function(d){return d.label===label;});
  var laA=api&&!api.proj&&ftApiData[apiI+1]&&ftApiData[apiI+1].proj;
  var laL=lora&&!lora.proj&&ftLoraData[loraI+1]&&ftLoraData[loraI+1].proj;
  return{label:label,
    apiA:api&&!api.proj?api.lc:null, apiP:api&&(api.proj||laA)?api.lc:null,
    loraA:lora&&!lora.proj?lora.lc:null, loraP:lora&&(lora.proj||laL)?lora.lc:null,
    apiCost:api?api.cost:null, loraCost:lora?lora.cost:null,
    apiModel:api?api.model:null, loraModel:lora?lora.model:null,
    apiNote:api?api.note:null, loraNote:lora?lora.note:null,
    apiProj:api?api.proj:null, loraProj:lora?lora.proj:null,
    loraGpu:lora?lora.gpu:null,loraPpm:api?api.ppm:null,
    loraGph:lora?lora.gph:null,loraHrs:lora?lora.hrs:null,
    apiPpm:api?api.ppm:null
  };
});

const ftLogTicks=[-2,-1,0,1,2];
const fFTCost=function(v){var c=Math.pow(10,v);if(c>=1)return"$"+c.toFixed(0);if(c>=0.1)return"$"+c.toFixed(1);return"$"+c.toFixed(2);};

const FtTT=function(props){
  if(!props.active||!props.payload||!props.payload.length)return null;
  var d=props.payload[0].payload;
  return React.createElement("div",{style:ttStyle},
    React.createElement("div",{style:{color:"#fff",fontWeight:600,fontSize:12,marginBottom:6}},d.label),
    d.apiModel&&React.createElement("div",null,
      React.createElement("span",{style:{color:P.purple,fontWeight:600}},"API: "),
      React.createElement("span",{style:{color:"#ccc"}},d.apiModel),
      React.createElement("div",{style:{fontSize:10,color:"#ccd"}},"$"+d.apiPpm+"/M tokens \u2192 ",React.createElement("span",{style:{color:"#fff",fontWeight:600}},"$"+d.apiCost.toFixed(2))," for 3M tokens"),
      d.apiProj&&React.createElement("span",{style:{color:P.rose,fontSize:9,fontStyle:"italic"}}," (projected)")
    ),
    d.loraModel&&React.createElement("div",{style:{marginTop:d.apiModel?6:0}},
      React.createElement("span",{style:{color:P.green,fontWeight:600}},"LoRA: "),
      React.createElement("span",{style:{color:"#ccc"}},d.loraModel),
      React.createElement("div",{style:{fontSize:10,color:"#ccd"}},d.loraGpu+" @ $"+d.loraGph+"/hr \u00D7 "+d.loraHrs+"h \u2192 ",React.createElement("span",{style:{color:"#fff",fontWeight:600}},"$"+d.loraCost.toFixed(2))),
      d.loraProj&&React.createElement("span",{style:{color:P.rose,fontSize:9,fontStyle:"italic"}}," (projected)")
    )
  );
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TOOLTIPS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ttStyle={background:"#0c0c1cee",border:`1px solid ${P.grid}`,borderRadius:8,padding:"11px 15px",fontSize:11,fontFamily:font,lineHeight:1.7,color:"#ccc",maxWidth:310,backdropFilter:"blur(12px)",boxShadow:"0 8px 32px #00000088"};

const InfTT=({active,payload})=>{
  if(!active||!payload?.length)return null;const d=payload[0].payload;
  return(<div style={ttStyle}>
    <div style={{color:d.proj?P.rose:P.cyan,fontWeight:600,fontSize:12,marginBottom:4}}>{d.label} â€” {d.model}</div>
    <div>Cost/query: <span style={{color:P.cyan}}>{fCost(d.qc)}</span></div>
    <div>Microwave equiv.: <span style={{color:P.amber}}>{fMW(d.mws)}</span></div>
    <div style={{fontSize:10,color:P.dim}}>In: ${d.i}/M Â· Out: ${d.o}/M</div>
    <div style={{color:"#bbc",fontSize:10,marginTop:4}}>{d.note}</div>
    {d.proj&&<div style={{color:P.rose,fontSize:10,fontStyle:"italic",marginTop:2}}>â–² projected (HW roadmap)</div>}
  </div>);
};

const TrainTT=({active,payload,isRep})=>{
  if(!active||!payload?.length)return null;const d=payload[0].payload;
  if(isRep)return(<div style={ttStyle}><div style={{color:"#fff",fontWeight:600,marginBottom:4}}>{d.label}</div>{d.g3c&&<div><span style={{color:P.cyan}}>GPT-3 level:</span> {fC(d.g3c)} Â· {fGWh(d.g3g)} â†’ <span style={{color:P.steel}}>{f7(to7g(d.g3g))} 777s</span>{d.g3p&&<span style={{color:P.dim}}> (est.)</span>}</div>}{d.g4c&&<div><span style={{color:P.gold}}>GPT-4 level:</span> {fC(d.g4c)} Â· {fGWh(d.g4g)} â†’ <span style={{color:P.steel}}>{f7(to7g(d.g4g))} 777s</span>{d.g4p&&<span style={{color:P.dim}}> (est.)</span>}</div>}</div>);
  return(<div style={ttStyle}><div style={{color:d.proj?P.red:dCol(d),fontWeight:600,fontSize:12,marginBottom:4}}>{d.model} {d.proj&&"âŒ"}</div><div>Cost: <span style={{color:"#fff"}}>{fC(d.cost)}</span></div><div>Energy: <span style={{color:P.gold}}>{fGWh(d.gwh)}</span></div><div style={{marginTop:4,padding:"4px 0",borderTop:`1px solid ${P.grid}`}}><span style={{color:P.steel,fontSize:13,fontWeight:700}}>âœˆ {f7(d.n777)} Boeing 777{d.n777!==1?"s":""}</span><div style={{fontSize:9,color:P.dim,marginTop:2}}>(metal smelting energy equivalent)</div></div></div>);
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHARED UI COMPONENTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const Pill=({active,onClick,children,accent,style:sx})=>(
  <button onClick={onClick} style={{
    background:active?`${accent||P.cyan}18`:"transparent",
    border:`1px solid ${active?accent||P.cyan:"#222"}`,
    borderRadius:20,color:active?accent||P.cyan:"#99a",
    fontFamily:font,fontSize:10.5,fontWeight:active?600:400,
    padding:"6px 16px",cursor:"pointer",transition:"all 0.2s",
    letterSpacing:0.3,whiteSpace:"nowrap",...(sx||{})
  }}>{children}</button>
);

const ChartWrap=({children})=>(
  <div style={{background:P.panel,borderRadius:10,border:"1px solid #1a1a30",padding:"20px 8px 8px 0",marginBottom:12}}>{children}</div>
);

const Legend=({items})=>(
  <div style={{display:"flex",flexWrap:"wrap",gap:14,fontSize:10,color:P.dim,marginBottom:6}}>
    {items.map((it,i)=><span key={i}>{it}</span>)}
  </div>
);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN APP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function App(){
  const[section,setSection]=useState("inference");
  const[infView,setInfView]=useState("cost");
  const[trainTab,setTrainTab]=useState("frontier");
  const[tuneTab,setTuneTab]=useState("curves");

  // inference y-axis
  const infYKey=infView==="cost"?"aCL":"aML";
  const infPKey=infView==="cost"?"pCL":"pML";
  const infYLabel=infView==="cost"?"Cost per Query (USD)":"Microwave Oven Energy Equivalent";
  const infYFmt=v=>{const val=Math.pow(10,v);return infView==="cost"?fCost(val):fMW(val);};
  const infLogT=[-6,-5,-4,-3,-2,-1,0,1];

  return(
    <div style={{background:P.bg,minHeight:"100vh",padding:"28px 20px 60px"}}>
      <div style={{maxWidth:940,margin:"0 auto"}}>

        {/* â”€â”€â”€ MASTHEAD â”€â”€â”€ */}
        <div style={{marginBottom:28,position:"relative"}}>
          <div style={{position:"absolute",top:-40,right:0,width:300,height:300,background:"radial-gradient(circle,#ff446608 0%,transparent 70%)",pointerEvents:"none"}}/>
          <div style={{fontSize:9,letterSpacing:4,color:P.dim,textTransform:"uppercase",marginBottom:8,fontWeight:500}}>
            LLM Cost Observatory Â· Feb 2026
          </div>
          <h1 style={{fontFamily:hf,fontSize:30,fontWeight:700,color:"#fff",margin:0,lineHeight:1.15,letterSpacing:"-0.5px"}}>
            The Diverging Scissors of AI Cost
          </h1>
          <p style={{fontSize:12,color:P.dim,marginTop:8,lineHeight:1.7,maxWidth:720}}>
            Inference cost per query is collapsing (1,000Ã— decline since 2022). Training cost for frontier models is exploding ($500M+ in 2025).
            Both measured against physical-world energy equivalents.
          </p>
        </div>

        {/* â”€â”€â”€ SECTION SELECTOR â”€â”€â”€ */}
        <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6,marginBottom:24}}>
          <Pill active={section==="inference"} onClick={()=>setSection("inference")} accent={P.cyan} style={{width:"100%"}}>
            âš¡ Inference Cost
          </Pill>
          <Pill active={section==="training"} onClick={()=>setSection("training")} accent={P.red} style={{width:"100%"}}>
            âœˆ Training Cost Ã— 777
          </Pill>
          <Pill active={section==="tuning"} onClick={()=>setSection("tuning")} accent={P.purple} style={{width:"100%"}}>
            {"\uD83D\uDD27 Fine-Tuning Cost"}
          </Pill>
          <Pill active={section==="summary"} onClick={()=>setSection("summary")} accent={P.gold} style={{width:"100%"}}>
            ğŸ“Š Combined Summary
          </Pill>
        </div>

        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {/* INFERENCE SECTION                          */}
        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {section==="inference"&&(<div>
          <div style={{display:"flex",alignItems:"center",gap:12,marginBottom:14}}>
            <h2 style={{fontFamily:hf,fontSize:18,fontWeight:600,color:P.bright,margin:0}}>Inference Cost Decline</h2>
            <div style={{display:"flex",gap:4}}>
              <Pill active={infView==="cost"} onClick={()=>setInfView("cost")} accent={P.cyan}>$/query</Pill>
              <Pill active={infView==="microwave"} onClick={()=>setInfView("microwave")} accent={P.amber}>ğŸ”¥ Microwave</Pill>
            </div>
          </div>
          <div style={{fontSize:11,color:P.dim,marginBottom:10}}>
            Cost per query ({QI} input + {QO} output tokens) on cheapest frontier-capable model. Log scale.
          </div>
          <ChartWrap>
            <ResponsiveContainer width="100%" height={440}>
              <ComposedChart data={infData} margin={{top:10,right:30,left:20,bottom:20}}>
                <defs>
                  <linearGradient id="infA" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stopColor={P.cyan} stopOpacity={0.12}/><stop offset="100%" stopColor={P.cyan} stopOpacity={0}/></linearGradient>
                </defs>
                <CartesianGrid strokeDasharray="3 3" stroke={P.grid}/>
                <XAxis dataKey="label" tick={{fill:"#99a",fontSize:9,fontFamily:font}} stroke="#222" angle={-35} textAnchor="end" height={60}/>
                <YAxis domain={[-6,1]} ticks={infLogT} tickFormatter={infYFmt} tick={{fill:"#99a",fontSize:9,fontFamily:font}} stroke="#222" width={90}
                  label={{value:infYLabel,angle:-90,position:"insideLeft",offset:10,style:{fill:"#889",fontSize:10,fontFamily:font}}}/>
                <Tooltip content={<InfTT/>}/>
                <Area dataKey={infYKey} stroke="none" fill="url(#infA)" connectNulls/>
                <Line dataKey={infYKey} stroke={P.cyan} strokeWidth={2.5} dot={{r:4.5,fill:P.cyan,stroke:P.panel,strokeWidth:2}} connectNulls/>
                <Line dataKey={infPKey} stroke={P.rose} strokeWidth={2} strokeDasharray="8 4" dot={{r:4,fill:P.rose,stroke:P.panel,strokeWidth:2}} connectNulls/>
                {infView==="microwave"&&<ReferenceLine y={Math.log10(5)} stroke={`${P.amber}66`} strokeDasharray="4 4"
                  label={{value:"â‰ˆ heat one bite of soup",position:"right",fill:P.amber,fontSize:9,fontFamily:font}}/>}
              </ComposedChart>
            </ResponsiveContainer>
          </ChartWrap>
          <Legend items={[
            <span><span style={{color:P.cyan}}>â”â”</span> Actual</span>,
            <span><span style={{color:P.rose}}>â•Œâ•Œ</span> Projected (NVIDIA roadmap)</span>,
          ]}/>

          {/* Inference data table */}
          <details style={{marginTop:16}}>
            <summary style={{cursor:"pointer",color:P.dim,fontSize:11,fontWeight:500,marginBottom:8}}>â–¸ Raw inference data</summary>
            <div style={{overflowX:"auto"}}>
              <table style={{width:"100%",borderCollapse:"collapse",fontSize:10.5,lineHeight:1.5}}>
                <thead><tr style={{borderBottom:"1px solid #222"}}>{["Date","Model","$/query","Microwave equiv.",""].map((h,i)=>(<th key={i} style={{textAlign:"left",padding:"6px 10px",color:"#ccd",fontWeight:500}}>{h}</th>))}</tr></thead>
                <tbody>{infData.map((d,i)=>(<tr key={i} style={{borderBottom:`1px solid ${P.grid}`,opacity:d.proj?0.6:1}}>
                  <td style={{padding:"5px 10px",color:"#ccd"}}>{d.label}</td>
                  <td style={{padding:"5px 10px",color:d.proj?P.rose:P.cyan,fontWeight:500}}>{d.model}{d.proj&&" âŒ"}</td>
                  <td style={{padding:"5px 10px",color:"#fff",fontWeight:500}}>{fCost(d.qc)}</td>
                  <td style={{padding:"5px 10px",color:P.amber}}>{fMW(d.mws)}</td>
                  <td style={{padding:"5px 10px",color:"#99a",fontSize:10}}>{d.note}</td>
                </tr>))}</tbody>
              </table>
            </div>
          </details>
        </div>)}

        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {/* TRAINING SECTION                           */}
        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {section==="training"&&(<div>
          <div style={{display:"flex",alignItems:"center",gap:12,marginBottom:14,flexWrap:"wrap"}}>
            <h2 style={{fontFamily:hf,fontSize:18,fontWeight:600,color:P.bright,margin:0}}>Training Cost â†’ 777 Smelting</h2>
            <div style={{display:"flex",gap:4}}>
              <Pill active={trainTab==="frontier"} onClick={()=>setTrainTab("frontier")} accent={P.red}>Frontier</Pill>
              <Pill active={trainTab==="replication"} onClick={()=>setTrainTab("replication")} accent={P.gold}>Replication</Pill>
              <Pill active={trainTab==="equiv"} onClick={()=>setTrainTab("equiv")} accent={P.steel}>Equivalences</Pill>
            </div>
          </div>
          <div style={{fontSize:11,color:P.dim,marginBottom:10}}>
            1 Boeing 777-300ER = 149t metal â†’ <span style={{color:P.gold}}>3,100 MWh</span> smelting energy. 777 equivalents based on actual training energy consumption, not cost.
          </div>

          {/* FRONTIER */}
          {trainTab==="frontier"&&(<div>
            <ChartWrap>
              <ResponsiveContainer width="100%" height={500}>
                <ComposedChart data={frontier} margin={{top:10,right:80,left:25,bottom:30}}>
                  <defs><linearGradient id="fa" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stopColor={P.red} stopOpacity={0.1}/><stop offset="100%" stopColor={P.red} stopOpacity={0}/></linearGradient></defs>
                  <CartesianGrid strokeDasharray="3 3" stroke={P.grid}/>
                  <XAxis dataKey="label" tick={{fill:"#99a",fontSize:9,fontFamily:font}} stroke="#222" angle={-45} textAnchor="end" height={65}/>
                  <YAxis yAxisId="c" domain={[2,10]} ticks={logT} tickFormatter={fLCT} tick={{fill:"#99a",fontSize:9,fontFamily:font}} stroke="#222" width={65}
                    label={{value:"Training Cost (USD)",angle:-90,position:"insideLeft",offset:5,style:{fill:"#889",fontSize:10,fontFamily:font}}}/>
                  <YAxis yAxisId="e" orientation="right" domain={[-4,4]} ticks={eLogT} tickFormatter={fELT} tick={{fill:P.gold,fontSize:9,fontFamily:font}} stroke="#222" width={72}
                    label={{value:"Training Energy",angle:90,position:"insideRight",offset:5,style:{fill:P.gold,fontSize:10,fontFamily:font}}}/>
                  <Tooltip content={<TrainTT/>}/>
                  <Area yAxisId="c" dataKey="actualLog" stroke="none" fill="url(#fa)" connectNulls/>
                  <Line yAxisId="c" dataKey="actualLog" stroke={P.red} strokeWidth={2.5} dot={props=>{const{cx,cy,payload}=props;if(cx==null||cy==null)return null;return(<circle key={payload.label} cx={cx} cy={cy} r={payload.tag==="eff"?6:5} fill={dCol(payload)} stroke={P.panel} strokeWidth={2}/>);}} connectNulls/>
                  <Line yAxisId="c" dataKey="projLog" stroke={P.red} strokeWidth={2} strokeDasharray="8 4" dot={{r:4,fill:P.red,stroke:P.panel,strokeWidth:2}} connectNulls/>
                  <Line yAxisId="e" dataKey="actualGWh" stroke={P.gold} strokeWidth={2} dot={{r:3.5,fill:P.gold,stroke:P.panel,strokeWidth:2}} connectNulls/>
                  <Line yAxisId="e" dataKey="projGWh" stroke={P.gold} strokeWidth={1.5} strokeDasharray="6 4" dot={{r:3,fill:P.gold,stroke:P.panel,strokeWidth:2}} connectNulls/>
                </ComposedChart>
              </ResponsiveContainer>
            </ChartWrap>
            <Legend items={[
              <span><span style={{color:P.red}}>â”â”</span> Cost <span style={{color:P.red}}>â•Œâ•Œ</span> proj.</span>,
              <span><span style={{color:P.gold}}>â”â”</span> Energy (GWh) <span style={{color:P.gold}}>â•Œâ•Œ</span> proj.</span>,
              <span><span style={{color:P.green}}>â—</span> Efficient (DS V3/R1, GPT-4o)</span>,
              <span><span style={{color:P.xai}}>â—</span> xAI (Grok 3/4)</span>,
              <span><span style={{color:P.meta}}>â—</span> Meta (Llama)</span>,
            ]}/>
          </div>)}

          {/* REPLICATION */}
          {trainTab==="replication"&&(<div>
            <ChartWrap>
              <ResponsiveContainer width="100%" height={480}>
                <ComposedChart data={repData} margin={{top:10,right:20,left:25,bottom:25}}>
                  <CartesianGrid strokeDasharray="3 3" stroke={P.grid}/>
                  <XAxis dataKey="label" tick={{fill:"#99a",fontSize:10,fontFamily:font}} stroke="#222" angle={-35} textAnchor="end" height={60}/>
                  <YAxis yAxisId="c" domain={[3,8]} ticks={[3,4,5,6,7,8]} tickFormatter={fLCT} tick={{fill:"#99a",fontSize:9,fontFamily:font}} stroke="#222" width={65}
                    label={{value:"Replication Cost (USD)",angle:-90,position:"insideLeft",offset:5,style:{fill:"#889",fontSize:10,fontFamily:font}}}/>
                  <Tooltip content={<TrainTT isRep/>}/>
                  <Line yAxisId="c" dataKey="aG3" stroke={P.cyan} strokeWidth={2.5} dot={{r:5,fill:P.cyan,stroke:P.panel,strokeWidth:2}} connectNulls/>
                  <Line yAxisId="c" dataKey="pG3" stroke={P.cyan} strokeWidth={2} strokeDasharray="8 4" dot={{r:4,fill:P.cyan,stroke:P.panel,strokeWidth:2}} connectNulls/>
                  <Line yAxisId="c" dataKey="aG4" stroke={P.gold} strokeWidth={2.5} dot={{r:5,fill:P.gold,stroke:P.panel,strokeWidth:2}} connectNulls/>
                  <Line yAxisId="c" dataKey="pG4" stroke={P.gold} strokeWidth={2} strokeDasharray="8 4" dot={{r:4,fill:P.gold,stroke:P.panel,strokeWidth:2}} connectNulls/>
                </ComposedChart>
              </ResponsiveContainer>
            </ChartWrap>
            <Legend items={[
              <span><span style={{color:P.cyan}}>â”â”</span> GPT-3 level <span style={{color:P.cyan}}>â•Œâ•Œ</span> proj.</span>,
              <span><span style={{color:P.gold}}>â”â”</span> GPT-4 level <span style={{color:P.gold}}>â•Œâ•Œ</span> proj.</span>,
            ]}/>
          </div>)}

          {/* EQUIVALENCES */}
          {trainTab==="equiv"&&(<div>
            <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(165px, 1fr))",gap:10,marginBottom:20}}>
              {[{m:"GPT-4",c:78e6,gwh:50,cl:P.red},{m:"Grok 4",c:490e6,gwh:310,cl:P.xai},{m:"GPT-5",c:500e6,gwh:200,cl:P.purple},{m:"2027 Frontier",c:2e9,gwh:1500,cl:P.gold}].map(x=>(<div key={x.m} style={{background:P.card,border:`1px solid ${x.cl}22`,borderRadius:10,padding:"14px 12px",textAlign:"center"}}>
                <div style={{fontSize:9,color:P.dim,letterSpacing:1,textTransform:"uppercase"}}>{x.m}</div>
                <div style={{fontSize:24,fontWeight:700,color:x.cl,marginTop:4,fontFamily:hf}}>{Math.round(to7g(x.gwh)).toLocaleString()}</div>
                <div style={{fontSize:10,color:P.steel}}>Boeing 777s</div>
                <div style={{fontSize:9,color:P.dim,marginTop:3}}>{fC(x.c)} Â· {fGWh(x.gwh)}</div>
              </div>))}
            </div>
            <div style={{background:P.card,border:"1px solid #1a1a30",borderRadius:10,padding:"16px 18px",marginBottom:20}}>
              <div style={{fontSize:12,fontWeight:600,color:"#fff",marginBottom:10,fontFamily:hf}}>âœˆ Boeing 777-300ER Metal Breakdown</div>
              <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:10,fontSize:10.5}}>
                {[{n:"Aluminum",k:"117,600",p:"70%",e:"1,764 MWh",cl:P.blue},{n:"Titanium",k:"11,760",p:"7%",e:"1,176 MWh",cl:"#ff6644"},{n:"Steel",k:"18,480",p:"11%",e:"148 MWh",cl:P.steel}].map(x=>(<div key={x.n} style={{padding:"6px 0"}}><div style={{color:x.cl,fontWeight:600,marginBottom:1}}>{x.n}</div><div style={{color:"#ccd"}}>{x.k} kg ({x.p})</div><div style={{color:P.dim}}>{x.e}</div></div>))}
                <div style={{padding:"6px 0",borderLeft:`2px solid ${P.gold}`,paddingLeft:12}}><div style={{color:P.gold,fontWeight:700}}>TOTAL</div><div style={{color:"#fff",fontWeight:600}}>148,680 kg</div><div style={{color:P.gold,fontWeight:600}}>3,100 MWh â†’ $465K</div></div>
              </div>
            </div>
            <div style={{overflowX:"auto"}}>
              <table style={{width:"100%",borderCollapse:"collapse",fontSize:10.5,lineHeight:1.5}}>
                <thead><tr style={{borderBottom:"1px solid #222"}}>{["Date","Model","Cost","Energy","âœˆ 777s","Context"].map((h,i)=>(<th key={i} style={{textAlign:"left",padding:"6px 10px",color:"#ccd",fontWeight:500}}>{h}</th>))}</tr></thead>
                <tbody>{FR.map((d,i)=>{const n=to7g(d.gwh);let ctx="";if(n<0.01)ctx="A few wing ribs";else if(n<0.1)ctx="Partial fuselage";else if(n<1)ctx="One airframe's metal";else if(n<5)ctx="Small fleet";else if(n<25)ctx="Regional airline fleet";else if(n<100)ctx="Major airline fleet";else if(n<300)ctx="Substantial fraction of global 777 fleet";else ctx="~28% of all 777s ever delivered (~1,700)";return(<tr key={i} style={{borderBottom:`1px solid ${P.grid}`,opacity:d.p?0.6:1}}>
                  <td style={{padding:"4px 10px",color:"#ccd",fontSize:10}}>{d.l}</td>
                  <td style={{padding:"4px 10px",color:dCol(d),fontWeight:500}}>{d.m}{d.p&&" âŒ"}</td>
                  <td style={{padding:"4px 10px",color:"#fff",fontWeight:500}}>{fC(d.c)}</td>
                  <td style={{padding:"4px 10px",color:P.gold}}>{fGWh(d.gwh)}</td>
                  <td style={{padding:"4px 10px",color:P.steel,fontWeight:700,fontSize:12}}>{f7(n)}</td>
                  <td style={{padding:"4px 10px",color:P.dim,fontStyle:"italic",fontSize:9.5}}>{ctx}</td>
                </tr>);})}</tbody>
              </table>
            </div>
          </div>)}
        </div>)}

        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {/* FINE-TUNING SECTION                        */}
        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {section==="tuning"&&(<div>
          <div style={{display:"flex",alignItems:"center",gap:12,marginBottom:14,flexWrap:"wrap"}}>
            <h2 style={{fontFamily:hf,fontSize:18,fontWeight:600,color:P.bright,margin:0}}>Fine-Tuning Cost Decline</h2>
            <div style={{display:"flex",gap:4}}>
              <Pill active={tuneTab==="curves"} onClick={()=>setTuneTab("curves")} accent={P.purple}>Cost Curves</Pill>
              <Pill active={tuneTab==="table"} onClick={()=>setTuneTab("table")} accent={P.green}>Comparison Table</Pill>
              <Pill active={tuneTab==="insight"} onClick={()=>setTuneTab("insight")} accent={P.gold}>Key Insight</Pill>
            </div>
          </div>
          <div style={{fontSize:11,color:P.dim,marginBottom:10}}>
            Cost to fine-tune on a standard task (1M training tokens {"\u00D7"} 3 epochs = 3M tokens). Log scale.
          </div>

          {/* COST CURVES */}
          {tuneTab==="curves"&&(<div>
            <ChartWrap>
              <ResponsiveContainer width="100%" height={460}>
                <ComposedChart data={ftChartData} margin={{top:10,right:30,left:20,bottom:25}}>
                  <defs>
                    <linearGradient id="ftAG" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stopColor={P.purple} stopOpacity={0.1}/><stop offset="100%" stopColor={P.purple} stopOpacity={0}/></linearGradient>
                  </defs>
                  <CartesianGrid strokeDasharray="3 3" stroke={P.grid}/>
                  <XAxis dataKey="label" tick={{fill:"#99a",fontSize:9,fontFamily:font}} stroke="#222" angle={-35} textAnchor="end" height={60}/>
                  <YAxis domain={[-2,2]} ticks={ftLogTicks} tickFormatter={fFTCost} tick={{fill:"#99a",fontSize:9,fontFamily:font}} stroke="#222" width={60}
                    label={{value:"Fine-Tuning Cost (USD)",angle:-90,position:"insideLeft",offset:10,style:{fill:"#889",fontSize:10,fontFamily:font}}}/>
                  <Tooltip content={<FtTT/>}/>
                  <ReferenceLine y={0} stroke={P.gold+"66"} strokeDasharray="4 4"
                    label={{value:"\u2248 less than a coffee",position:"right",fill:P.gold,fontSize:9,fontFamily:font}}/>
                  <Area dataKey="apiA" stroke="none" fill="url(#ftAG)" connectNulls/>
                  <Line dataKey="apiA" stroke={P.purple} strokeWidth={2.5} dot={{r:4.5,fill:P.purple,stroke:P.panel,strokeWidth:2}} connectNulls/>
                  <Line dataKey="apiP" stroke={P.purple} strokeWidth={2} strokeDasharray="8 4" dot={{r:4,fill:P.purple,stroke:P.panel,strokeWidth:2}} connectNulls/>
                  <Line dataKey="loraA" stroke={P.green} strokeWidth={2.5} dot={{r:4.5,fill:P.green,stroke:P.panel,strokeWidth:2}} connectNulls/>
                  <Line dataKey="loraP" stroke={P.green} strokeWidth={2} strokeDasharray="8 4" dot={{r:4,fill:P.green,stroke:P.panel,strokeWidth:2}} connectNulls/>
                </ComposedChart>
              </ResponsiveContainer>
            </ChartWrap>
            <Legend items={[
              <span><span style={{color:P.purple}}>{"\u2501\u2501"}</span> API fine-tuning <span style={{color:P.purple}}>{"\u254C\u254C"}</span> proj.</span>,
              <span><span style={{color:P.green}}>{"\u2501\u2501"}</span> Self-hosted LoRA <span style={{color:P.green}}>{"\u254C\u254C"}</span> proj.</span>,
              <span><span style={{color:P.gold}}>{"\u2504\u2504"}</span> $1 reference</span>,
            ]}/>
          </div>)}

          {/* COMPARISON TABLE */}
          {tuneTab==="table"&&(<div>
            <div style={{fontSize:12,fontWeight:600,color:P.purple,fontFamily:hf,marginBottom:10}}>Series A {"\u2014"} API / Hosted Fine-Tuning</div>
            <div style={{overflowX:"auto",marginBottom:20}}>
              <table style={{width:"100%",borderCollapse:"collapse",fontSize:10.5,lineHeight:1.5}}>
                <thead><tr style={{borderBottom:"1px solid #222"}}>{["Date","Model","$/1M tokens","Cost (3M tok)","Notes"].map(function(h,i){return(<th key={i} style={{textAlign:"left",padding:"6px 10px",color:"#ccd",fontWeight:500}}>{h}</th>);})}</tr></thead>
                <tbody>{ftApiData.map(function(d,i){return(<tr key={i} style={{borderBottom:"1px solid "+P.grid,opacity:d.proj?0.6:1}}>
                  <td style={{padding:"5px 10px",color:"#ccd"}}>{d.label}</td>
                  <td style={{padding:"5px 10px",color:d.proj?P.rose:P.purple,fontWeight:500}}>{d.model}{d.proj&&" \u2301"}</td>
                  <td style={{padding:"5px 10px",color:"#fff",fontWeight:500}}>{"$"+d.ppm.toFixed(2)}</td>
                  <td style={{padding:"5px 10px",color:P.purple,fontWeight:600}}>{"$"+d.cost.toFixed(2)}</td>
                  <td style={{padding:"5px 10px",color:"#99a",fontSize:10}}>{d.note}</td>
                </tr>);})}</tbody>
              </table>
            </div>
            <div style={{fontSize:12,fontWeight:600,color:P.green,fontFamily:hf,marginBottom:10}}>Series B {"\u2014"} Self-Hosted LoRA (7B{"\u2013"}13B open-weight)</div>
            <div style={{overflowX:"auto"}}>
              <table style={{width:"100%",borderCollapse:"collapse",fontSize:10.5,lineHeight:1.5}}>
                <thead><tr style={{borderBottom:"1px solid #222"}}>{["Date","Model","GPU","$/hr","Hours","Total Cost","Notes"].map(function(h,i){return(<th key={i} style={{textAlign:"left",padding:"6px 10px",color:"#ccd",fontWeight:500}}>{h}</th>);})}</tr></thead>
                <tbody>{ftLoraData.map(function(d,i){return(<tr key={i} style={{borderBottom:"1px solid "+P.grid,opacity:d.proj?0.6:1}}>
                  <td style={{padding:"5px 10px",color:"#ccd"}}>{d.label}</td>
                  <td style={{padding:"5px 10px",color:d.proj?P.rose:P.green,fontWeight:500}}>{d.model}{d.proj&&" \u2301"}</td>
                  <td style={{padding:"5px 10px",color:P.steel}}>{d.gpu}</td>
                  <td style={{padding:"5px 10px",color:"#fff"}}>{"$"+d.gph.toFixed(2)}</td>
                  <td style={{padding:"5px 10px",color:"#ccd"}}>{d.hrs+"h"}</td>
                  <td style={{padding:"5px 10px",color:P.green,fontWeight:600}}>{"$"+d.cost.toFixed(2)}</td>
                  <td style={{padding:"5px 10px",color:"#99a",fontSize:10}}>{d.note}</td>
                </tr>);})}</tbody>
              </table>
            </div>
          </div>)}

          {/* KEY INSIGHT */}
          {tuneTab==="insight"&&(<div>
            <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:20}}>
              <div style={{background:P.card,border:"1px solid "+P.purple+"22",borderRadius:12,padding:"20px"}}>
                <div style={{fontSize:9,letterSpacing:2,color:P.dim,textTransform:"uppercase",marginBottom:8}}>API Fine-Tuning</div>
                <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                  <span style={{fontSize:12,color:"#ccd"}}>Mar 2023</span>
                  <span style={{fontSize:20,fontWeight:700,color:P.purple,fontFamily:hf}}>$24</span>
                </div>
                <div style={{display:"flex",alignItems:"center",gap:6,margin:"6px 0"}}>
                  <div style={{flex:1,height:1,background:"linear-gradient(to right, "+P.purple+", "+P.green+")"}}/>
                  <span style={{fontSize:10,color:P.green}}>{"\u223C"}80{"\u00D7"} cheaper</span>
                  <div style={{flex:1,height:1,background:"linear-gradient(to right, "+P.green+", "+P.purple+")"}}/>
                </div>
                <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                  <span style={{fontSize:12,color:"#ccd"}}>Oct 2025</span>
                  <span style={{fontSize:20,fontWeight:700,color:P.green,fontFamily:hf}}>$0.30</span>
                </div>
              </div>
              <div style={{background:P.card,border:"1px solid "+P.green+"22",borderRadius:12,padding:"20px"}}>
                <div style={{fontSize:9,letterSpacing:2,color:P.dim,textTransform:"uppercase",marginBottom:8}}>Self-Hosted LoRA</div>
                <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                  <span style={{fontSize:12,color:"#ccd"}}>Jun 2023</span>
                  <span style={{fontSize:20,fontWeight:700,color:P.green,fontFamily:hf}}>$7.00</span>
                </div>
                <div style={{display:"flex",alignItems:"center",gap:6,margin:"6px 0"}}>
                  <div style={{flex:1,height:1,background:"linear-gradient(to right, "+P.green+", "+P.cyan+")"}}/>
                  <span style={{fontSize:10,color:P.cyan}}>{"\u223C"}700{"\u00D7"} cheaper</span>
                  <div style={{flex:1,height:1,background:"linear-gradient(to right, "+P.cyan+", "+P.green+")"}}/>
                </div>
                <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                  <span style={{fontSize:12,color:"#ccd"}}>2027 (est.)</span>
                  <span style={{fontSize:20,fontWeight:700,color:P.cyan,fontFamily:hf}}>$0.01</span>
                </div>
              </div>
            </div>
            <div style={{background:"linear-gradient(135deg, "+P.card+" 0%, #161630 100%)",border:"1px solid #1a1a40",borderRadius:12,padding:"24px 28px"}}>
              <div style={{fontSize:14,fontWeight:600,color:P.bright,fontFamily:hf,marginBottom:10}}>The Convergence</div>
              <div style={{fontSize:11.5,color:"#bbc",lineHeight:1.8}}>
                {"API fine-tuning and self-hosted LoRA costs are converging toward near-zero. In 2023, fine-tuning a model via API cost $24 \u2014 today the same capability costs $0.30 with open-weight LoRA on rented GPU."}
                <br/><br/>
                {"Fine-tuning a model now costs less than a single frontier inference query did in 2022 ($0.06). This means "}
                <span style={{color:P.purple}}>{"personalization is essentially free"}</span>
                {". Any developer can adapt a frontier-class model to their domain for the price of a gumball."}
                <br/><br/>
                {"The implication: the moat is not in adaptation or deployment \u2014 it\u2019s in "}
                <span style={{color:P.red}}>{"base model training"}</span>
                {", where costs continue to escalate into the hundreds of millions. The "}
                <span style={{color:P.green}}>{"efficient outliers"}</span>
                {" (Unsloth, QLoRA, DeepSeek) have compressed fine-tuning from a capital expense into a rounding error."}
              </div>
            </div>
          </div>)}
        </div>)}

        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {/* COMBINED SUMMARY                           */}
        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {section==="summary"&&(<div>
          <h2 style={{fontFamily:hf,fontSize:18,fontWeight:600,color:P.bright,marginBottom:16}}>The Scissors Effect</h2>

          {/* Stat cards */}
          <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12,marginBottom:28}}>
            <div style={{background:P.card,border:`1px solid ${P.cyan}22`,borderRadius:12,padding:"20px"}}>
              <div style={{fontSize:9,letterSpacing:2,color:P.dim,textTransform:"uppercase",marginBottom:8}}>Inference Cost / Query</div>
              <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                <span style={{fontSize:12,color:"#ccd"}}>Nov 2022</span>
                <span style={{fontSize:20,fontWeight:700,color:P.cyan,fontFamily:hf}}>$0.060</span>
              </div>
              <div style={{display:"flex",alignItems:"center",gap:6,margin:"6px 0"}}>
                <div style={{flex:1,height:1,background:`linear-gradient(to right, ${P.cyan}, ${P.green})`}}/>
                <span style={{fontSize:10,color:P.green}}>~4,000Ã— cheaper</span>
                <div style={{flex:1,height:1,background:`linear-gradient(to right, ${P.green}, ${P.cyan})`}}/>
              </div>
              <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                <span style={{fontSize:12,color:"#ccd"}}>Dec 2025</span>
                <span style={{fontSize:20,fontWeight:700,color:P.green,fontFamily:hf}}>$0.000015</span>
              </div>
              <div style={{fontSize:10,color:P.dim,marginTop:10,lineHeight:1.6}}>
                From <span style={{color:P.amber}}>24 min</span> to <span style={{color:P.amber}}>0.4 ms</span> of microwave oven energy equivalent.
                By 2027 projected: <span style={{color:P.rose}}>$0.000001</span> â€” energy of a camera flash.
              </div>
            </div>

            <div style={{background:P.card,border:`1px solid ${P.red}22`,borderRadius:12,padding:"20px"}}>
              <div style={{fontSize:9,letterSpacing:2,color:P.dim,textTransform:"uppercase",marginBottom:8}}>Frontier Training Cost</div>
              <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                <span style={{fontSize:12,color:"#ccd"}}>2020</span>
                <span style={{fontSize:20,fontWeight:700,color:P.red,fontFamily:hf}}>$4.6M</span>
              </div>
              <div style={{display:"flex",alignItems:"center",gap:6,margin:"6px 0"}}>
                <div style={{flex:1,height:1,background:`linear-gradient(to right, ${P.red}, ${P.xai})`}}/>
                <span style={{fontSize:10,color:P.xai}}>~110Ã— more expensive</span>
                <div style={{flex:1,height:1,background:`linear-gradient(to right, ${P.xai}, ${P.red})`}}/>
              </div>
              <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                <span style={{fontSize:12,color:"#ccd"}}>2025</span>
                <span style={{fontSize:20,fontWeight:700,color:P.xai,fontFamily:hf}}>$500M</span>
              </div>
              <div style={{fontSize:10,color:P.dim,marginTop:10,lineHeight:1.6}}>
                From <span style={{color:P.steel}}>0.4 Boeing 777s</span> to <span style={{color:P.steel}}>65 Boeing 777s</span> of metal smelting energy.
                By 2027 projected: <span style={{color:P.rose}}>$2B</span> â€” <span style={{color:P.steel}}>484 airframes</span>, roughly 28% of all 777s ever delivered.
              </div>
            </div>

            <div style={{background:P.card,border:`1px solid ${P.gold}22`,borderRadius:12,padding:"20px"}}>
              <div style={{fontSize:9,letterSpacing:2,color:P.dim,textTransform:"uppercase",marginBottom:8}}>The Ratio</div>
              <div style={{fontSize:10,color:"#ccd",lineHeight:1.7,marginBottom:8}}>
                How many inference queries could you buy for the cost of one frontier training run?
              </div>
              <div style={{display:"grid",gap:6}}>
                {[
                  {y:"2023",train:"GPT-4 ($78M)",q:78e6/0.06,qf:"1.3B"},
                  {y:"2025",train:"GPT-5 ($500M)",q:500e6/0.000015,qf:"33T"},
                  {y:"2027",train:"Frontier ($2B)",q:2e9/0.000001,qf:"2,000T"},
                ].map(r=>(<div key={r.y} style={{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:`1px solid ${P.grid}`}}>
                  <span style={{color:"#ccd",fontSize:11}}>{r.y} â€” {r.train}</span>
                  <span style={{color:P.gold,fontWeight:600,fontSize:12}}>{r.qf} queries</span>
                </div>))}
              </div>
              <div style={{fontSize:10,color:P.dim,marginTop:10}}>
                The gap between training and inference cost is widening by ~3 orders of magnitude every 2 years.
              </div>
            </div>

            <div style={{background:P.card,border:`1px solid ${P.purple}22`,borderRadius:12,padding:"20px"}}>
              <div style={{fontSize:9,letterSpacing:2,color:P.dim,textTransform:"uppercase",marginBottom:8}}>Fine-Tuning Cost</div>
              <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                <span style={{fontSize:12,color:"#ccd"}}>Mar 2023</span>
                <span style={{fontSize:20,fontWeight:700,color:P.purple,fontFamily:hf}}>$24</span>
              </div>
              <div style={{display:"flex",alignItems:"center",gap:6,margin:"6px 0"}}>
                <div style={{flex:1,height:1,background:`linear-gradient(to right, ${P.purple}, ${P.green})`}}/>
                <span style={{fontSize:10,color:P.green}}>{"\u223C"}80{"\u00D7"} cheaper</span>
                <div style={{flex:1,height:1,background:`linear-gradient(to right, ${P.green}, ${P.purple})`}}/>
              </div>
              <div style={{display:"flex",alignItems:"baseline",gap:8}}>
                <span style={{fontSize:12,color:"#ccd"}}>Oct 2025</span>
                <span style={{fontSize:20,fontWeight:700,color:P.green,fontFamily:hf}}>$0.30</span>
              </div>
              <div style={{fontSize:10,color:P.dim,marginTop:10,lineHeight:1.6}}>
                Model personalization is essentially free. Fine-tuning now costs less than a single inference query did in 2022.
                By 2027: <span style={{color:P.rose}}>$0.01</span> via self-hosted LoRA.
              </div>
            </div>
          </div>

          {/* Key insight */}
          <div style={{background:`linear-gradient(135deg, ${P.card} 0%, #161630 100%)`,border:"1px solid #1a1a40",borderRadius:12,padding:"24px 28px",marginBottom:20}}>
            <div style={{fontSize:14,fontWeight:600,color:P.bright,fontFamily:hf,marginBottom:10}}>Why it matters</div>
            <div style={{fontSize:11.5,color:"#bbc",lineHeight:1.8}}>
              The economics of AI are splitting into two distinct regimes. <span style={{color:P.cyan}}>Using</span> frontier intelligence is approaching near-zero marginal cost â€” a single query that once cost more than heating a bowl of soup now costs less than firing a single neuron. Meanwhile, <span style={{color:P.red}}>creating</span> that intelligence demands industrial-scale energy commitments that rival smelting the metal for entire airline fleets.
              <br/><br/>
              This divergence has structural implications: inference commoditizes rapidly (enabling ubiquitous deployment), while training concentrates into fewer organizations that can marshal the capital. The <span style={{color:P.green}}>efficient outliers</span> like DeepSeek demonstrate that algorithmic innovation can partially counteract this concentration â€” training a GPT-4-class model for $5.6M (1.2 Boeing 777s of energy) vs. $78M (16 Boeing 777s) â€” but the frontier itself keeps moving upward.
            </div>
          </div>
        </div>)}

        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        {/* FOOTER ASSUMPTIONS                         */}
        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
        <div style={{marginTop:32,padding:"16px 20px",background:P.card,borderRadius:8,border:"1px solid #1a1a30",fontSize:9.5,color:"#ccd",lineHeight:1.8}}>
          <strong style={{color:"#bbc"}}>Assumptions & sources (updated Feb 2026)</strong><br/>
          <strong style={{color:"#bbc"}}>Inference:</strong> Query = {QI} input + {QO} output tokens. Microwave = {MW_WATTS}W. Electricity = ${ELEC_R}/kWh US avg.
          Frontier model = cheapest achieving GPT-4-class benchmarks at each date. Projections: NVIDIA Blackwellâ†’Vera Rubinâ†’Rubin Ultra HW roadmap.
          Sources: OpenAI pricing, Epoch AI, a16z LLMflation, DeepSeek announcements, NVIDIA roadmaps.<br/>
          <strong style={{color:"#bbc"}}>Training:</strong> 777-300ER: OEW ~168t â†’ 70% Al, 7% Ti, 11% steel = 148.7t metal. Smelting: Al=15, Ti=100, Steel=8 kWh/kg â†’ 3,100 MWh = $465K @ $0.15/kWh.
          Boeing 777 equivalents use actual training energy (GWh), not costÃ·electricity rate. Electricity is only ~10-15% of total training cost (rest: GPU amortization, overhead, cloud margin).
          Energy sources: Grok 4 = 310 GWh (Epoch AI, 246M H100-hours, Sep 2025). GPT-4 â‰ˆ 50 GWh (25K A100 Ã— 100d, widely cited). DeepSeek V3 â‰ˆ 3.6 GWh (2.8M H800-hrs).
          Others estimated from GPU-hours Ã— TDP Ã— 0.75 utilization Ã— 2.03 non-GPU overhead Ã— 1.2 PUE. HW FLOP/watt improves ~1.28Ã—/yr (Epoch AI).
          Projections: ~2.5Ã—/yr net energy growth (4.4Ã— compute growth offset by HW + algorithmic efficiency gains).<br/>
          <strong style={{color:"#bbc"}}>Fine-tuning:</strong> API costs from OpenAI/Mistral published pricing. Self-hosted estimates assume 1M training tokens Ã— 3 epochs on LoRA/QLoRA with Unsloth on rented cloud GPU.
          GPU rates: Lambda Labs / RunPod spot pricing. Open-weight models: Llama 2/3/4, Mistral 7B.
        </div>
      </div>
    </div>
  );
}
ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
